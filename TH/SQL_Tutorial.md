# คู่มือการเรียนรู้ SQL ฉบับเข้าใจง่าย

## บทนำ
SQL (Structured Query Language) คือภาษาที่ใช้จัดการกับฐานข้อมูล ไม่ว่าจะเป็นการดึงข้อมูล, เพิ่ม, แก้ไข หรือลบ โดยใช้คำสั่งที่เป็นภาษาอังกฤษที่อ่านเข้าใจง่าย

## การดึงข้อมูลพื้นฐาน

### SELECT: การเลือกข้อมูลที่ต้องการ
เปรียบเสมือนการเลือกของในร้านค้า คุณสามารถเลือกได้ว่าต้องการดูข้อมูลอะไรบ้าง

```sql
-- ดึงข้อมูลทั้งหมด
SELECT * FROM employees;  -- เหมือนการหยิบของทุกชิ้นในร้าน

-- ดึงเฉพาะบางคอลัมน์
SELECT first_name, last_name FROM employees;  -- เหมือนการเลือกเฉพาะสิ่งที่ต้องการ
```

### WHERE: การกรองข้อมูล
เหมือนการกรองของที่เราต้องการ เช่น เสื้อสีแดง หรือรองเท้าไซส์ 42

```sql
-- หาพนักงานที่เงินเดือนมากกว่า 50,000
SELECT * FROM employees WHERE salary > 50000;

-- หาสินค้าที่มีราคาระหว่าง 100 ถึง 500 บาท
SELECT * FROM products WHERE price BETWEEN 100 AND 500;
```

## การจัดการกับข้อความ

### การต่อข้อความ
เหมือนการนำคำหลายๆ คำมาต่อกัน เช่น "สวัสดี" + "คุณ" + "สมชาย" = "สวัสดีคุณสมชาย"

```sql
SELECT first_name || ' ' || last_name AS full_name FROM employees;
```

### การค้นหาข้อความ
เหมือนการค้นหาคำในหนังสือ โดยใช้เครื่องมือพิเศษ:
- `%` เหมือนการใช้ไพ่จอคเกอร์ แทนตัวอักษรกี่ตัวก็ได้
- `_` แทนตัวอักษรแค่ 1 ตัว

```sql
-- หาชื่อที่ขึ้นต้นด้วย 'ส'
SELECT * FROM customers WHERE name LIKE 'ส%';  -- จะเจอ สมชาย, สมหญิง, สมศักดิ์

-- หาเบอร์โทรที่เป็นรูปแบบ 08x-xxx-xxxx
SELECT * FROM contacts WHERE phone LIKE '08_-___-____';
```

## การคำนวณและตัวเลข

### การคำนวณพื้นฐาน
เหมือนการใช้เครื่องคิดเลข แต่ทำได้กับข้อมูลจำนวนมาก

```sql
-- คำนวณราคาสินค้าหลังลด 10%
SELECT 
    product_name,
    price,
    price * 0.9 AS discounted_price
FROM products;
```

### การปัดเศษและจัดการตัวเลข
เหมือนการปัดเศษในชีวิตประจำวัน:
- ROUND: ปัดเศษแบบปกติ (≥0.5 ปัดขึ้น, <0.5 ปัดลง)
- CEIL: ปัดขึ้นเสมอ
- FLOOR: ปัดลงเสมอ

```sql
-- ปัดเศษราคาสินค้าให้เป็นจำนวนเต็มร้อย
SELECT 
    product_name,
    price,
    ROUND(price, -2) AS rounded_price  -- 1234.56 จะกลายเป็น 1200
FROM products;
```

## การจัดการกับวันที่และเวลา

### รูปแบบวันที่
วันที่ในฐานข้อมูลมักเก็บในรูปแบบมาตรฐาน: YYYY-MM-DD
- YYYY: ปี 4 หลัก เช่น 2024
- MM: เดือน 2 หลัก (01-12)
- DD: วัน 2 หลัก (01-31)

```sql
-- หาออเดอร์ในเดือนมกราคม 2024
SELECT * FROM orders 
WHERE order_date BETWEEN '2024-01-01' AND '2024-01-31';
```

### การคำนวณระยะเวลา
เหมือนการนับวันในปฏิทิน แต่ SQL ช่วยคำนวณให้อัตโนมัติ

```sql
-- หาว่าสินค้าแต่ละชิ้นอยู่ในคลังมากี่วันแล้ว
SELECT 
    product_name,
    CURRENT_DATE - received_date AS days_in_stock
FROM inventory;
```

## การจัดกลุ่มและสรุปข้อมูล

### GROUP BY: การจัดกลุ่ม
เหมือนการแยกของใส่กล่องตามประเภท เช่น แยกเสื้อตามสี หรือรองเท้าตามไซส์

```sql
-- หายอดขายรวมแยกตามประเภทสินค้า
SELECT 
    category,
    SUM(sales_amount) AS total_sales
FROM sales
GROUP BY category;
```

### HAVING: การกรองกลุ่ม
เหมือนการคัดกล่องที่เราจัดกลุ่มไว้แล้ว เช่น เอาเฉพาะกล่องที่มีของมากกว่า 10 ชิ้น

```sql
-- หาประเภทสินค้าที่มียอดขายรวมมากกว่า 100,000
SELECT 
    category,
    SUM(sales_amount) AS total_sales
FROM sales
GROUP BY category
HAVING SUM(sales_amount) > 100000;
```

## การเชื่อมตาราง (JOIN)

### เข้าใจ JOIN ผ่านตัวอย่างร้านค้า
สมมติว่าเรามีข้อมูลแยกเป็น 2 ตาราง:
- ตารางสินค้า: รหัสสินค้า, ชื่อสินค้า, ราคา
- ตารางประเภท: รหัสประเภท, ชื่อประเภท

การใช้ JOIN จะช่วยให้เราดึงข้อมูลจากทั้งสองตารางมาแสดงพร้อมกัน:

```sql
-- แสดงชื่อสินค้าพร้อมประเภท
SELECT 
    products.name AS product_name,
    categories.name AS category_name,
    products.price
FROM products
JOIN categories ON products.category_id = categories.id;
```

### ประเภทของ JOIN
1. INNER JOIN: เหมือนการจับคู่ที่ต้องมีข้อมูลตรงกันทั้งสองฝั่ง
2. LEFT JOIN: เอาข้อมูลฝั่งซ้ายทั้งหมด แม้ไม่มีคู่ทางขวา
3. RIGHT JOIN: เอาข้อมูลฝั่งขวาทั้งหมด แม้ไม่มีคู่ทางซ้าย

## เทคนิคการเขียน SQL ให้ดี

1. **เขียนให้อ่านง่าย**
   - ใช้การขึ้นบรรทัดใหม่เพื่อแบ่งส่วน
   - ใช้ชื่อที่สื่อความหมาย
   - เยื้องข้อความให้เป็นระเบียบ

2. **เขียนให้มีประสิทธิภาพ**
   - เลือกดึงเฉพาะข้อมูลที่จำเป็น
   - ใช้เงื่อนไขที่เหมาะสม
   - ระวังการ JOIN ที่อาจทำให้ข้อมูลซ้ำ

3. **เขียนให้ปลอดภัย**
   - ระวังการหารด้วยศูนย์
   - จัดการค่า NULL อย่างเหมาะสม
   - ตรวจสอบผลลัพธ์เสมอ

## สรุป
SQL ไม่ใช่แค่ภาษาคอมพิวเตอร์ แต่เป็นเครื่องมือที่ช่วยให้เราจัดการข้อมูลได้อย่างมีประสิทธิภาพ เมื่อเข้าใจหลักการพื้นฐานและฝึกฝนอย่างสม่ำเสมอ คุณจะสามารถใช้ SQL ได้อย่างคล่องแคล่วและมั่นใจ 